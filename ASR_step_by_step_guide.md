1) Download and install Anaconda. For windows user, follow the instruction here: https://docs.anaconda.com/anaconda/install/windows/. For mac user, follow the instruction here: https://docs.anaconda.com/anaconda/install/mac-os/. Then open the Anaconda prompt/terminal, you should see (base) in the prompt: 
```
(base) yuchen@psycomps-MacBook-Pro-2 ~ %
```

2) Go to https://github.com/TalkBank/batchalign for instructions on installing batchalign. As the first step, run
```
curl -O "https://raw.githubusercontent.com/TalkBank/batchalign/master/environment.yml" & conda env create -f environment.yml
```
which first download a .yml file to your local computer and then create a conda environment based on the configs from the file.
The output looks like this:
```
(base) yuchen@psycomps-MacBook-Pro-2 ~ % curl -O "https://raw.githubusercontent.com/TalkBank/batchalign/master/environment.yml" & conda env create -f environment.yml
[1] 69385
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   115  100   115    0     0    388      0 --:--:-- --:--:-- --:--:--   395
[1]  + done       curl -O 
Collecting package metadata (repodata.json): done
Solving environment: done


==> WARNING: A newer version of conda exists. <==
  current version: 4.13.0
  latest version: 22.11.1

Please update conda by running

    $ conda update -n base conda



Downloading and Extracting Packages
libiconv-1.17        | 1.3 MB    | ######################################################### | 100% 
expat-2.5.0          | 152 KB    | ######################################################### | 100% 
tokenizers-0.13.2    | 2.7 MB    | ######################################################### | 100% 
aws-c-sdkutils-0.1.7 | 46 KB     | ######################################################### | 100% 
fsspec-2023.1.0      | 106 KB    | ######################################################### | 100% 
filelock-3.9.0       | 13 KB     | ######################################################### | 100% 
baumwelch-0.3.7      | 273 KB    | ######################################################### | 100% 
pytest-runner-4.2    | 8 KB      | ######################################################### | 100% 
pango-1.50.12        | 396 KB    | ######################################################### | 100% 
freetype-2.12.1      | 559 KB    | ######################################################### | 100% 
libabseil-20220623.0 | 950 KB    | ######################################################### | 100% 
libwebp-base-1.2.4   | 316 KB    | ######################################################### | 100% 
colorama-0.4.6       | 25 KB     | ######################################################### | 100% 
click-8.1.3          | 74 KB     | ######################################################### | 100% 
gnutls-3.7.8         | 2.1 MB    | ######################################################### | 100% 
zipp-3.12.0          | 16 KB     | ######################################################### | 100% 
cryptography-39.0.0  | 1.0 MB    | ######################################################### | 100% 
pthread-stubs-0.4    | 6 KB      | ######################################################### | 100% 
nettle-3.8.1         | 525 KB    | ######################################################### | 100% 
setuptools-66.1.1    | 630 KB    | ######################################################### | 100% 
resampy-0.4.2        | 3.2 MB    | ######################################################### | 100% 
dataclassy-1.0.1     | 31 KB     | ######################################################### | 100% 
pyopenssl-23.0.0     | 124 KB    | ######################################################### | 100% 
certifi-2022.12.7    | 147 KB    | ######################################################### | 100% 
requests-2.28.2      | 55 KB     | ######################################################### | 100% 
pytz-2022.7.1        | 182 KB    | ######################################################### | 100% 
yarl-1.8.2           | 82 KB     | ######################################################### | 100% 
font-ttf-ubuntu-0.83 | 1.9 MB    | ######################################################### | 100% 
svt-av1-1.4.1        | 1.1 MB    | ######################################################### | 100% 
pysocks-1.7.1        | 19 KB     | ######################################################### | 100% 
gdk-pixbuf-2.42.10   | 522 KB    | ######################################################### | 100% 
biopython-1.80       | 2.4 MB    | ######################################################### | 100% 
aws-sdk-cpp-1.10.57  | 3.2 MB    | ######################################################### | 100% 
python_abi-3.10      | 6 KB      | ######################################################### | 100% 
websocket-client-1.5 | 43 KB     | ######################################################### | 100% 
libgoogle-cloud-2.5. | 5.2 MB    | ######################################################### | 100% 
urllib3-1.26.14      | 110 KB    | ######################################################### | 100% 
datasets-2.9.0       | 319 KB    | ######################################################### | 100% 
openfst-1.8.2        | 6.1 MB    | ######################################################### | 100% 
sqlalchemy-2.0.0     | 2.4 MB    | ######################################################### | 100% 
cffi-1.15.1          | 214 KB    | ######################################################### | 100% 
pyarrow-10.0.1       | 2.8 MB    | ######################################################### | 100% 
frozenlist-1.3.3     | 41 KB     | ######################################################### | 100% 
typing_extensions-4. | 29 KB     | ######################################################### | 100% 
lame-3.100           | 516 KB    | ######################################################### | 100% 
greenlet-2.0.2       | 177 KB    | ######################################################### | 100% 
snappy-1.1.9         | 33 KB     | ######################################################### | 100% 
importlib_metadata-6 | 9 KB      | ######################################################### | 100% 
packaging-23.0       | 40 KB     | ######################################################### | 100% 
libgrpc-1.51.1       | 3.0 MB    | ######################################################### | 100% 
zlib-1.2.13          | 79 KB     | ######################################################### | 100% 
libtiff-4.5.0        | 339 KB    | ######################################################### | 100% 
pytorch-1.13.1       | 35.6 MB   | ######################################################### | 100% 
libprotobuf-3.21.12  | 1.7 MB    | ######################################################### | 100% 
orc-1.8.2            | 353 KB    | ######################################################### | 100% 
numba-0.56.4         | 3.6 MB    | ######################################################### | 100% 
batchalign-0.0.13    | 202.6 MB  | ######################################################### | 100% 
lerc-4.0.0           | 211 KB    | ######################################################### | 100% 
libdeflate-1.17      | 47 KB     | ######################################################### | 100% 
pcre2-10.40          | 1.1 MB    | ######################################################### | 100% 
aws-c-mqtt-0.7.13    | 48 KB     | ######################################################### | 100% 
pandas-1.5.3         | 10.9 MB   | ######################################################### | 100% 
aom-3.5.0            | 2.4 MB    | ######################################################### | 100% 
regex-2022.10.31     | 342 KB    | ######################################################### | 100% 
tzdata-2022g         | 106 KB    | ######################################################### | 100% 
openjpeg-2.5.0       | 300 KB    | ######################################################### | 100% 
pillow-9.4.0         | 41.1 MB   | ######################################################### | 100% 
brotlipy-0.7.0       | 351 KB    | ######################################################### | 100% 
libwebp-1.2.4        | 76 KB     | ######################################################### | 100% 
huggingface_hub-0.12 | 134 KB    | ######################################################### | 100% 
mpg123-1.31.2        | 342 KB    | ######################################################### | 100% 
libevent-2.1.10      | 1.2 MB    | ######################################################### | 100% 
mad-0.15.1b          | 112 KB    | ######################################################### | 100% 
libtool-2.4.7        | 399 KB    | ######################################################### | 100% 
typing-extensions-4. | 8 KB      | ######################################################### | 100% 
wheel-0.38.4         | 32 KB     | ######################################################### | 100% 
tqdm-4.64.1          | 82 KB     | ######################################################### | 100% 
exceptiongroup-1.1.0 | 18 KB     | ######################################################### | 100% 
libcurl-7.87.0       | 306 KB    | ######################################################### | 100% 
montreal-forced-alig | 432 KB    | ######################################################### | 100% 
libcxx-14.0.6        | 1.3 MB    | ######################################################### | 100% 
libsndfile-1.2.0     | 294 KB    | ######################################################### | 100% 
libzlib-1.2.13       | 50 KB     | ######################################################### | 100% 
libthrift-0.16.0     | 348 KB    | ######################################################### | 100% 
libjpeg-turbo-2.1.4  | 835 KB    | ######################################################### | 100% 
lz4-c-1.9.4          | 138 KB    | ######################################################### | 100% 
harfbuzz-6.0.0       | 1.1 MB    | ######################################################### | 100% 
aws-c-http-0.7.0     | 142 KB    | ######################################################### | 100% 
zstd-1.5.2           | 301 KB    | ######################################################### | 100% 
praatio-5.1.1        | 55 KB     | ######################################################### | 100% 
fribidi-1.0.10       | 59 KB     | ######################################################### | 100% 
kiwisolver-1.4.4     | 61 KB     | ######################################################### | 100% 
ffmpeg-5.1.2         | 8.1 MB    | ######################################################### | 100% 
libcblas-3.9.0       | 13 KB     | ######################################################### | 100% 
libllvm11-11.1.0     | 20.6 MB   | ######################################################### | 100% 
liblapack-3.9.0      | 13 KB     | ######################################################### | 100% 
idna-3.4             | 55 KB     | ######################################################### | 100% 
responses-0.18.0     | 35 KB     | ######################################################### | 100% 
libbrotlicommon-1.0. | 65 KB     | ######################################################### | 100% 
aws-c-compression-0. | 17 KB     | ######################################################### | 100% 
pysoundfile-0.11.0   | 25 KB     | ######################################################### | 100% 
libidn2-2.3.4        | 169 KB    | ######################################################### | 100% 
pyyaml-6.0           | 159 KB    | ######################################################### | 100% 
llvmlite-0.39.1      | 262 KB    | ######################################################### | 100% 
kaldi-5.5.1016       | 24.6 MB   | ######################################################### | 100% 
iniconfig-2.0.0      | 11 KB     | ######################################################### | 100% 
re2-2022.06.01       | 162 KB    | ######################################################### | 100% 
unicodedata2-15.0.0  | 498 KB    | ######################################################### | 100% 
fonts-conda-forge-1  | 4 KB      | ######################################################### | 100% 
liblapacke-3.9.0     | 13 KB     | ######################################################### | 100% 
aws-checksums-0.1.14 | 47 KB     | ######################################################### | 100% 
libbrotlienc-1.0.9   | 298 KB    | ######################################################### | 100% 
libarrow-10.0.1      | 16.1 MB   | ######################################################### | 100% 
python-3.10.8        | 10.1 MB   | ######################################################### | 100% 
libcrc32c-1.1.2      | 18 KB     | ######################################################### | 100% 
gts-0.7.6            | 357 KB    | ######################################################### | 100% 
joblib-1.2.0         | 205 KB    | ######################################################### | 100% 
aws-c-s3-0.2.3       | 65 KB     | ######################################################### | 100% 
x264-1!164.3095      | 700 KB    | ######################################################### | 100% 
librosa-0.9.2        | 156 KB    | ######################################################### | 100% 
font-ttf-source-code | 684 KB    | ######################################################### | 100% 
libpng-1.6.39        | 253 KB    | ######################################################### | 100% 
sleef-3.5.1          | 363 KB    | ######################################################### | 100% 
graphite2-1.3.13     | 81 KB     | ######################################################### | 100% 
gtk2-2.24.33         | 7.0 MB    | ######################################################### | 100% 
audioread-3.0.0      | 34 KB     | ######################################################### | 100% 
contourpy-1.0.7      | 196 KB    | ######################################################### | 100% 
arrow-cpp-10.0.1     | 31 KB     | ######################################################### | 100% 
librsvg-2.54.4       | 7.0 MB    | ######################################################### | 100% 
xxhash-0.8.1         | 85 KB     | ######################################################### | 100% 
gflags-2.2.2         | 85 KB     | ######################################################### | 100% 
libbrotlidec-1.0.9   | 31 KB     | ######################################################### | 100% 
charset-normalizer-2 | 36 KB     | ######################################################### | 100% 
brotli-1.0.9         | 19 KB     | ######################################################### | 100% 
brotli-bin-1.0.9     | 18 KB     | ######################################################### | 100% 
llvm-openmp-15.0.7   | 257 KB    | ######################################################### | 100% 
aiosignal-1.3.1      | 12 KB     | ######################################################### | 100% 
aws-c-auth-0.6.21    | 79 KB     | ######################################################### | 100% 
libutf8proc-2.8.0    | 101 KB    | ######################################################### | 100% 
pixman-0.40.0        | 285 KB    | ######################################################### | 100% 
aws-c-cal-0.5.20     | 29 KB     | ######################################################### | 100% 
openh264-2.3.1       | 1.3 MB    | ######################################################### | 100% 
ninja-1.11.0         | 115 KB    | ######################################################### | 100% 
libgd-2.3.3          | 193 KB    | ######################################################### | 100% 
atk-1.0-2.38.0       | 364 KB    | ######################################################### | 100% 
tomli-2.0.1          | 16 KB     | ######################################################### | 100% 
multiprocess-0.70.14 | 222 KB    | ######################################################### | 100% 
libglib-2.74.1       | 2.9 MB    | ######################################################### | 100% 
matplotlib-base-3.6. | 6.4 MB    | ######################################################### | 100% 
libtasn1-4.19.0      | 114 KB    | ######################################################### | 100% 
krb5-1.20.1          | 1.0 MB    | ######################################################### | 100% 
font-ttf-inconsolata | 94 KB     | ######################################################### | 100% 
pip-23.0             | 1.3 MB    | ######################################################### | 100% 
font-ttf-dejavu-sans | 388 KB    | ######################################################### | 100% 
importlib-metadata-6 | 24 KB     | ######################################################### | 100% 
aws-c-event-stream-0 | 45 KB     | ######################################################### | 100% 
pluggy-1.0.0         | 16 KB     | ######################################################### | 100% 
python-xxhash-3.2.0  | 20 KB     | ######################################################### | 100% 
ca-certificates-2022 | 142 KB    | ######################################################### | 100% 
aws-c-common-0.8.5   | 176 KB    | ######################################################### | 100% 
ngram-1.3.14         | 2.6 MB    | ######################################################### | 100% 
fontconfig-2.14.2    | 232 KB    | ######################################################### | 100% 
fonttools-4.38.0     | 1.9 MB    | ######################################################### | 100% 
pynini-2.1.5         | 1.4 MB    | ######################################################### | 100% 
ansiwrap-0.8.4       | 9 KB      | ######################################################### | 100% 
fonts-conda-ecosyste | 4 KB      | ######################################################### | 100% 
aiohttp-3.8.3        | 424 KB    | ######################################################### | 100% 
libgfortran-5.0.0    | 143 KB    | ######################################################### | 100% 
aws-crt-cpp-0.18.16  | 161 KB    | ######################################################### | 100% 
attrs-22.2.0         | 53 KB     | ######################################################### | 100% 
nltk-3.8.1           | 1.0 MB    | ######################################################### | 100% 
lcms2-2.14           | 200 KB    | ######################################################### | 100% 
multidict-6.0.4      | 45 KB     | ######################################################### | 100% 
libgfortran5-11.3.0  | 1.0 MB    | ######################################################### | 100% 
scikit-learn-1.2.1   | 6.7 MB    | ######################################################### | 100% 
parquet-cpp-1.5.1    | 3 KB      | ######################################################### | 100% 
textwrap3-0.9.2      | 12 KB     | ######################################################### | 100% 
cairo-1.16.0         | 1.3 MB    | ######################################################### | 100% 
scipy-1.10.0         | 17.9 MB   | ######################################################### | 100% 
aws-c-io-0.13.12     | 117 KB    | ######################################################### | 100% 
libxml2-2.10.3       | 632 KB    | ######################################################### | 100% 
transformers-4.24.0  | 2.7 MB    | ######################################################### | 100% 
libssh2-1.10.0       | 218 KB    | ######################################################### | 100% 
dill-0.3.6           | 81 KB     | ######################################################### | 100% 
libsqlite-3.40.0     | 804 KB    | ######################################################### | 100% 
sox-14.4.2           | 411 KB    | ######################################################### | 100% 
glog-0.6.0           | 95 KB     | ######################################################### | 100% 
dataclasses-0.8      | 10 KB     | ######################################################### | 100% 
xz-5.2.6             | 230 KB    | ######################################################### | 100% 
pytest-7.2.1         | 232 KB    | ######################################################### | 100% 
openssl-3.0.7        | 2.0 MB    | ######################################################### | 100% 
libnghttp2-1.51.0    | 549 KB    | ######################################################### | 100% 
libblas-3.9.0        | 13 KB     | ######################################################### | 100% 
libflac-1.4.2        | 341 KB    | ######################################################### | 100% 
graphviz-7.1.0       | 4.4 MB    | ######################################################### | 100% 
gettext-0.21.1       | 3.8 MB    | ######################################################### | 100% 
async-timeout-4.0.2  | 9 KB      | ######################################################### | 100% 
Preparing transaction: done
Verifying transaction: done
Executing transaction: | 
- 
done
Installing pip dependencies: / Ran pip subprocess with arguments:
['/Users/yuchen/miniconda3/envs/batchalign/bin/python', '-m', 'pip', 'install', '-U', '-r', '/Users/yuchen/condaenv.rbtys6iu.requirements.txt']
Pip subprocess output:
Collecting rev_ai
  Using cached rev_ai-2.17.1-py2.py3-none-any.whl (37 kB)
Collecting websocket-client<1.0.0,>=0.56.0
  Using cached websocket_client-0.59.0-py2.py3-none-any.whl (67 kB)
Requirement already satisfied: six<2.0.0,>=1.12.0 in ./miniconda3/envs/batchalign/lib/python3.10/site-packages (from rev_ai->-r /Users/yuchen/condaenv.rbtys6iu.requirements.txt (line 1)) (1.16.0)
Requirement already satisfied: requests<3.0.0,>=2.21.0 in ./miniconda3/envs/batchalign/lib/python3.10/site-packages (from rev_ai->-r /Users/yuchen/condaenv.rbtys6iu.requirements.txt (line 1)) (2.28.2)
Requirement already satisfied: idna<4,>=2.5 in ./miniconda3/envs/batchalign/lib/python3.10/site-packages (from requests<3.0.0,>=2.21.0->rev_ai->-r /Users/yuchen/condaenv.rbtys6iu.requirements.txt (line 1)) (3.4)
Requirement already satisfied: charset-normalizer<4,>=2 in ./miniconda3/envs/batchalign/lib/python3.10/site-packages (from requests<3.0.0,>=2.21.0->rev_ai->-r /Users/yuchen/condaenv.rbtys6iu.requirements.txt (line 1)) (2.1.1)
Requirement already satisfied: certifi>=2017.4.17 in ./miniconda3/envs/batchalign/lib/python3.10/site-packages (from requests<3.0.0,>=2.21.0->rev_ai->-r /Users/yuchen/condaenv.rbtys6iu.requirements.txt (line 1)) (2022.12.7)
Requirement already satisfied: urllib3<1.27,>=1.21.1 in ./miniconda3/envs/batchalign/lib/python3.10/site-packages (from requests<3.0.0,>=2.21.0->rev_ai->-r /Users/yuchen/condaenv.rbtys6iu.requirements.txt (line 1)) (1.26.14)
Installing collected packages: websocket-client, rev_ai
  Attempting uninstall: websocket-client
    Found existing installation: websocket-client 1.5.0
    Uninstalling websocket-client-1.5.0:
      Successfully uninstalled websocket-client-1.5.0
Successfully installed rev_ai-2.17.1 websocket-client-0.59.0

done
#
# To activate this environment, use
#
#     $ conda activate batchalign
#
# To deactivate an active environment, use
#
#     $ conda deactivate
```

3) Then let's activate the environment by:
```
conda activate batchalign
```
You will see `(batchalign)` in the prompt, which means we are in the batchalign environment now.
```
(base) yuchen@psycomps-MacBook-Pro-2 ~ % conda activate batchalign
(batchalign) yuchen@psycomps-MacBook-Pro-2 ~ % 
```

4) Then let's create folders for inputs and outputs. You can use command line to do this. Finder or File Explorer also does the job. You can check what `~` means by `pwd` command (the Windows equivalent is `cd`):

```
(batchalign) yuchen@psycomps-MacBook-Pro-2 ~ % pwd
/Users/yuchen
```

We can make a new directory called `mfa_data/` and enter it:
```
(batchalign) yuchen@psycomps-MacBook-Pro-2 ~ % mkdir mfa_data
(batchalign) yuchen@psycomps-MacBook-Pro-2 ~ % cd mfa_data 
(batchalign) yuchen@psycomps-MacBook-Pro-2 mfa_data % 
``` 

Similarly, we can make two directories `input` and `output`. As a sanity check, we can use `ls` to list all files and directories inside the current directory (the Windows equivalent is `dir`):

```
(batchalign) yuchen@psycomps-MacBook-Pro-2 mfa_data % mkdir output
(batchalign) yuchen@psycomps-MacBook-Pro-2 mfa_data % ls
input	output
```


5) Next, you will need to prepare your audio file and put it inside the `input` folder. If you record with iPhone, the format is m4a. Since batchalign only accepts mp3, mp4, and wav, we need to convert m4a to wav or mp3. You can easily do it online. For example, I used this one: https://cloudconvert.com/m4a-to-wav


6) We need a rev.ai account to transcribe the speech. Go to rev.ai, sign up, and on the left side of your dashboard, you will find a tab called Access Token. Click generate to generate a new token, copy and paste the key to somewhere you can find later.

7) We are only one step away! Now make sure you are in the batchalign environment and your audio file is inside the `input` folder. Just run:

```
batchalign ~/mfa_data/input ~/mfa_data/output 
```

The program will ask for your rev.ai key that you obtained in step 6. It will also ask for names of the speakers and their roles as well as the name of the corpus. Any name is fine, but don't leave them blank. Now you should see transcribed speech in `output` folder!
